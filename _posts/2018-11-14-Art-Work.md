---
layout: post
title: 中国陶瓷资料总集
categories: Android
description: 中国陶瓷资料总集
keywords: Android, Emulator, TCP
---

陶瓷材料大多是氧化物、氮化物、硼化物和碳化物等。常见的陶瓷材料有粘土、氧化铝、高岭土等。陶瓷材料一般硬度较高，但可塑性较差。除了在食器、装饰的使用上，在科学、技术的发展中亦扮演重要角色。陶瓷原料是地球原有的大量资源黏土经过淬取而成。而粘土的性质具韧性，常温遇水可塑，微干可雕，全干可磨;烧至700度可成陶器能装水;烧至1230度则瓷化，可完全不吸水且耐高温耐腐蚀。其用法之弹性，在今日文化科技中尚有各种创意的应用。

中国陶瓷是陶器和瓷器的总称。中国人早在约公元前8000-2000年(新石器时代)就发明了陶器。

## 陶瓷图片欣赏

<img src="http://image.so.com/v?src=360pic_normal&z=1&i=0&cmg=b7b9ddf76d1be761a26872c868c3fff5&q=%E4%B8%AD%E5%9B%BD%E9%99%B6%E7%93%B7&correct=%E4%B8%AD%E5%9B%BD%E9%99%B6%E7%93%B7&cmsid=4fa9f2e0ff72aa3bc9d0fcf3b8340194&cmran=0&cmras=0&cn=0&gn=0&kn=0#multiple=0&gsrc=1&dataindex=3&id=a9ffeaa79a7efbec9441a6ddec01e76c&currsn=0&jdx=3&fsn=60"/>

## 实现两台模拟器之间的通信

现在来解决标题和文首提到的问题，主要用到了网络重定向。

假设开发环境是：

* PC 是指运行模拟器的宿主电脑

* emulator-5554 是模拟器 1，将在 TCP 通信中作为 server 端

* emulator-5556 是模拟器 2，将在 TCP 通信中作为 client 端

配置步骤：

1. 在 emulator-5554 上运行 server，侦听 10.0.2.15:58080

2. 在 PC 上运行 `cat ~/.emulator_console_auth_token`，得到一个 token

3. 在 PC 上运行

    ```sh
    telnet localhost 5554
    auth <token>
    redir add tcp:51212:58080
    ```

    `<token>` 是指第 2 步中得到的 token。

    51212 是 PC 端口，58080 是 5554 模拟器的端口。

4. 在 emulator-5556 上运行 client 程序，连接 10.0.2.2:51212

至此，两台模拟器之间已经可以通过 TCP 愉快地通信了。

它们之间的网络连接和通信示意图如下：

![](/images/posts/android/emulators-communication.png)

**注：** 

* 以上步骤中用到的端口号都是可以根据你的需求替换的

* Windows 下 telnet 命令默认没有启用，具体启用方法请搜狗一下

## 模拟器的网络限制

1. 模拟器上运行的 Apps 可以连接到宿主电脑上的网络，但这是通过模拟器间接实现，不是直接连到宿主电脑的网卡。模拟器可以看作是宿主电脑上运行的一个普通程序。

2. 因为模拟器的特殊网络配置，可能无法支持一些网络协议，比如 ping 命令使用的 ICMP 协议。目前，模拟器不支持 IGMP 和 multicast。

    *试验了一下，模拟器的 shell 里 `ping www.sogou.com` 一直卡在那，在手机的 shell 里就可以。*

## 额外的发现

在阅读 Android 官方文档里关于模拟器的章节时，意外地发现有一节 [Sending a voice call or SMS to another emulator instance][2]

就是说模拟器可以给另外的模拟器打电话和发短信，电话号码就是端口号，比如 emulator-5554 模拟器，电话号码就是 5554，这个号码也可以从模拟器的窗口标题栏上找到，比如 `Android Emulator - Nexus_5X_API_19:5554`，里面那个 5554 就是。

## 后话

天下博文，大部分都逃不出官方文档与公开源码的范畴（比如本文就是），而且都是选定文档里讲的某一小部分来进行讲解演绎，这在作为扩展视野、快速上手、快速解决问题等用途时还是比较实用的，但如果想系统、全面地学习，官方文档一般是更好的选择。

[1]: https://developer.android.com/studio/run/emulator-networking.html#connecting
[2]: https://developer.android.com/studio/run/emulator-networking.html#calling
